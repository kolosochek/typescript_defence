{"ast":null,"code":"import { getMapParams } from \"../maps/Level1\";\nclass Enemy {\n  constructor(context) {\n    let isMoving = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let animationFrameId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let randomOffset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n      x: Math.floor(Math.random() * 10),\n      y: Math.floor(Math.random() * 10)\n    };\n    let currentPosition = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n      x: 0,\n      y: 0\n    };\n    let enemyParams = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n      width: 6,\n      height: 6,\n      spaceBetweenEnemies: 15\n    };\n    let mapParams = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : getMapParams();\n    this.context = context;\n    this.isMoving = isMoving;\n    this.animationFrameId = animationFrameId;\n    this.randomOffset = randomOffset;\n    this.currentPosition = currentPosition;\n    this.enemyParams = enemyParams;\n    this.mapParams = mapParams;\n  }\n  drawEnemy() {\n    let initialPosition = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      x: 0,\n      y: 0\n    };\n    // set initial coords of enemy\n    this.currentPosition.x = this.mapParams.startX + this.randomOffset.x + initialPosition.x;\n    this.currentPosition.y = this.mapParams.startY + this.randomOffset.y + initialPosition.y;\n\n    // draw a 2d representation\n    this.context.beginPath();\n    this.context.rect(this.currentPosition.x, this.currentPosition.y, this.enemyParams.width, this.enemyParams.height);\n    this.context.strokeStyle = 'red';\n    this.context.stroke();\n    this.context.closePath();\n  }\n  moveRight() {\n    this.animationFrameId = requestAnimationFrame(() => this.move());\n    // increment x, y is constant\n    this.currentPosition.x += 1;\n\n    // clear prev render\n    this.context.fillRect(this.currentPosition.x - 2, this.currentPosition.y - 1, this.enemyParams.width + 1, this.enemyParams.height + 2);\n\n    // and place a new figure on canvas\n    this.context.beginPath();\n    this.context.rect(this.currentPosition.x, this.currentPosition.y, this.enemyParams.width, this.enemyParams.height);\n    this.context.strokeStyle = 'red';\n    this.context.stroke();\n    this.context.closePath();\n  }\n  moveDown() {\n    this.animationFrameId = requestAnimationFrame(() => this.move());\n    // increment y, x is constant\n    this.currentPosition.y += 1;\n\n    // clear prev render\n    this.context.fillRect(this.currentPosition.x - 1, this.currentPosition.y - 2, this.enemyParams.width + 2, this.enemyParams.height + 2);\n\n    // and place a new figure on canvas\n    this.context.beginPath();\n    this.context.rect(this.currentPosition.x, this.currentPosition.y, this.enemyParams.width, this.enemyParams.height);\n    this.context.strokeStyle = 'red';\n    this.context.stroke();\n    this.context.closePath();\n  }\n  move() {\n    if (!this.isMoving) {}\n\n    // moving right and then\n    if (this.currentPosition.x <= this.mapParams.rightBorder + this.randomOffset.x) {\n      this.moveRight();\n    } else {\n      this.stop();\n      // move down and then\n      if (this.currentPosition.y <= this.mapParams.bottomBorder + this.randomOffset.y) {\n        this.moveDown();\n      } else {\n        this.stop();\n        // move right and then stop\n        if (this.currentPosition.x <= this.mapParams.width + this.randomOffset.x) {\n          this.moveRight();\n        } else {\n          this.stop();\n        }\n      }\n    }\n\n    // debug\n    //console.log(`this.currentPosition.x`)\n    //console.log(this.currentPosition.x)\n    //console.log(`this.currentPosition.x > mapParams.rightBorder`)\n    //console.log(this.currentPosition.x > this.mapParams.rightBorder)\n    //\n\n    /*\n    if(this.currentPosition.x <= mapParams.rightBorder) {\n        this.moveRight()\n    } else if (this.currentPosition.x == mapParams.rightBorder ) {\n        this.moveDown()\n    }\n     */\n\n    setTimeout(() => {\n      this.stop();\n    }, 15000);\n  }\n  stop() {\n    if (this.animationFrameId !== null) {\n      cancelAnimationFrame(this.animationFrameId);\n    }\n  }\n}\nexport default Enemy;","map":{"version":3,"names":["getMapParams","Enemy","constructor","context","isMoving","animationFrameId","randomOffset","x","Math","floor","random","y","currentPosition","enemyParams","width","height","spaceBetweenEnemies","mapParams","drawEnemy","initialPosition","startX","startY","beginPath","rect","strokeStyle","stroke","closePath","moveRight","requestAnimationFrame","move","fillRect","moveDown","rightBorder","stop","bottomBorder","setTimeout","cancelAnimationFrame"],"sources":["/data/towerDefence/client/src/enemies/Enemy.ts"],"sourcesContent":["import {getMapParams} from \"../maps/Level1\";\n\nclass Enemy {\n    constructor(\n        public context: CanvasRenderingContext2D,\n        public isMoving: boolean = false,\n        public animationFrameId: number | null = null,\n        public randomOffset = {\n            x: Math.floor(Math.random() * 10),\n            y: Math.floor(Math.random() * 10),\n        },\n        public currentPosition = {\n            x: 0,\n            y: 0,\n        },\n        public enemyParams = {\n            width: 6,\n            height: 6,\n            spaceBetweenEnemies: 15,\n        },\n        public mapParams = getMapParams(),\n    ) {\n\n    }\n\n    public drawEnemy(initialPosition:Record<string,number> = {x:0, y:0}) {\n        // set initial coords of enemy\n        this.currentPosition.x = this.mapParams.startX + this.randomOffset.x + initialPosition.x\n        this.currentPosition.y = this.mapParams.startY + this.randomOffset.y + initialPosition.y\n\n        // draw a 2d representation\n        this.context.beginPath()\n        this.context.rect(this.currentPosition.x, this.currentPosition.y, this.enemyParams.width, this.enemyParams.height)\n        this.context.strokeStyle = 'red'\n        this.context.stroke()\n        this.context.closePath()\n    }\n\n    public moveRight() {\n        this.animationFrameId = requestAnimationFrame(() => this.move())\n        // increment x, y is constant\n        this.currentPosition.x += 1\n\n        // clear prev render\n        this.context.fillRect(this.currentPosition.x - 2, this.currentPosition.y - 1 , this.enemyParams.width + 1, this.enemyParams.height + 2)\n\n        // and place a new figure on canvas\n        this.context.beginPath()\n        this.context.rect(this.currentPosition.x, this.currentPosition.y, this.enemyParams.width, this.enemyParams.height)\n        this.context.strokeStyle = 'red'\n        this.context.stroke()\n        this.context.closePath()\n    }\n\n    public moveDown() {\n        this.animationFrameId = requestAnimationFrame(() => this.move())\n        // increment y, x is constant\n        this.currentPosition.y += 1\n\n        // clear prev render\n        this.context.fillRect(this.currentPosition.x - 1, this.currentPosition.y - 2 , this.enemyParams.width + 2, this.enemyParams.height + 2)\n\n        // and place a new figure on canvas\n        this.context.beginPath()\n        this.context.rect(this.currentPosition.x, this.currentPosition.y, this.enemyParams.width, this.enemyParams.height)\n        this.context.strokeStyle = 'red'\n        this.context.stroke()\n        this.context.closePath()\n    }\n\n    public move() {\n        if (!this.isMoving) {\n\n        }\n\n        // moving right and then\n        if (this.currentPosition.x <= this.mapParams.rightBorder + this.randomOffset.x) {\n            this.moveRight()\n        } else {\n            this.stop()\n            // move down and then\n            if (this.currentPosition.y <= this.mapParams.bottomBorder + this.randomOffset.y) {\n                this.moveDown()\n            } else {\n                this.stop()\n                // move right and then stop\n                if (this.currentPosition.x <= this.mapParams.width + this.randomOffset.x) {\n                    this.moveRight()\n                } else {\n                    this.stop()\n                }\n            }\n\n        }\n\n\n\n        // debug\n        //console.log(`this.currentPosition.x`)\n        //console.log(this.currentPosition.x)\n        //console.log(`this.currentPosition.x > mapParams.rightBorder`)\n        //console.log(this.currentPosition.x > this.mapParams.rightBorder)\n        //\n\n        /*\n        if(this.currentPosition.x <= mapParams.rightBorder) {\n            this.moveRight()\n        } else if (this.currentPosition.x == mapParams.rightBorder ) {\n            this.moveDown()\n        }\n         */\n\n\n        setTimeout(() => {\n            this.stop()\n        }, 15000)\n    }\n\n    public stop() {\n        if (this.animationFrameId !== null) {\n            cancelAnimationFrame(this.animationFrameId!)\n        }\n    }\n}\n\nexport default Enemy;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}